
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Graphics &#8212; pyimgalgos-doc 1 documentation</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head>
  <body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../index.html">pyimgalgos-doc 1 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for Graphics</h1><div class="highlight"><pre>
<span></span><span class="ch">#!@PYTHON@</span>
<span class="c1">####!/usr/bin/env python</span>
<span class="c1">#------------------------------</span>
<span class="sd">&quot;&quot;&quot;:py:class:`Graphics` wrapping methods for matplotlib</span>
<span class="sd">=======================================================</span>

<span class="sd">Usage::</span>

<span class="sd">    import pyimgalgos.Graphics as gr</span>

<span class="sd">    # Methods</span>

<span class="sd">    fig = gr.figure(figsize=(13,12), title=&#39;Image&#39;, dpi=80, facecolor=&#39;w&#39;, edgecolor=&#39;w&#39;, frameon=True, move=None)</span>
<span class="sd">    gr.move_fig(fig, x0=200, y0=100)</span>
<span class="sd">    gr.move(x0=200, y0=100)</span>
<span class="sd">    gr.add_axes(fig, axwin=(0.05, 0.03, 0.87, 0.93))</span>
<span class="sd">    gr.fig_img_cbar_axes(fig=None, win_axim=(0.05,  0.03, 0.87, 0.93), win_axcb=(0.923, 0.03, 0.02, 0.93))</span>
<span class="sd">    gr.set_win_title(fig, titwin=&#39;Image&#39;)</span>
<span class="sd">    gr.add_title_labels_to_axes(axes, title=None, xlabel=None, ylabel=None, fslab=14, fstit=20, color=&#39;k&#39;)</span>
<span class="sd">    gr.show(mode=None)</span>
<span class="sd">    gr.draw()</span>
<span class="sd">    gr.draw_fig(fig)</span>
<span class="sd">    gr.save_plt(fname=&#39;img.png&#39;, verb=True)</span>
<span class="sd">    gr.save_fig(fig, fname=&#39;img.png&#39;, verb=True)</span>
<span class="sd">    hi = gr.hist(axhi, arr, bins=None, amp_range=None, weights=None, color=None, log=False)</span>
<span class="sd">    imsh = gr.imshow(axim, img, amp_range=None, extent=None, interpolation=&#39;nearest&#39;, aspect=&#39;auto&#39;, origin=&#39;upper&#39;, orientation=&#39;horizontal&#39;, cmap=&#39;inferno&#39;)</span>
<span class="sd">    cbar = gr.colorbar(fig, imsh, axcb, orientation=&#39;vertical&#39;, amp_range=None)</span>
<span class="sd">    imsh, cbar = gr.imshow_cbar(fig, axim, axcb, img, amin=None, amax=None, extent=None, interpolation=&#39;nearest&#39;, aspect=&#39;auto&#39;, origin=&#39;upper&#39;, orientation=&#39;vertical&#39;, cmap=&#39;inferno&#39;)</span>

<span class="sd">See:</span>
<span class="sd">  - :py:class:`Graphics`</span>
<span class="sd">  - :py:class:`GlobalGraphics`</span>
<span class="sd">  - :py:class:`NDArrGenerators`</span>
<span class="sd">  - :py:class:`HBins`</span>
<span class="sd">  - :py:class:`HPolar`</span>
<span class="sd">  - :py:class:`HSpectrum`</span>
<span class="sd">  - :py:class:`NDArrSpectrum`</span>
<span class="sd">  - :py:class:`RadialBkgd`</span>
<span class="sd">  - `Radial background &lt;https://confluence.slac.stanford.edu/display/PSDMInternal/Radial+background+subtraction+algorithm&gt;`_.</span>
<span class="sd">  - `matplotlib &lt;https://matplotlib.org/contents.html&gt;`_.</span>

<span class="sd">This software was developed for the SIT project.</span>
<span class="sd">If you use all or part of it, please give an appropriate acknowledgment.</span>

<span class="sd">Created in 2015 by Mikhail Dubrovin</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">#------------------------------</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="c1">#if matplotlib.get_backend() != &#39;Qt4Agg&#39; : matplotlib.use(&#39;Qt4Agg&#39;)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>  <span class="k">as</span> <span class="nn">plt</span>
<span class="c1">#import matplotlib.lines   as lines</span>
<span class="c1">#import matplotlib.patches as patches</span>

<span class="kn">from</span> <span class="nn">CalibManager.PlotImgSpeWidget</span> <span class="k">import</span> <span class="n">add_stat_text</span>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="figure"><a class="viewcode-back" href="../index.html#Graphics.figure">[docs]</a><span class="k">def</span> <span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">12</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Image&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">move</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Creates and returns figure</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>\
                     <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>\
                     <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span>\
                     <span class="n">edgecolor</span><span class="o">=</span><span class="n">edgecolor</span><span class="p">,</span>\
                     <span class="n">frameon</span><span class="o">=</span><span class="n">frameon</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">set_window_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">move</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">move_fig</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="n">move</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y0</span><span class="o">=</span><span class="n">move</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">fig</span></div>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">move_fig</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
    <span class="c1">#fig.canvas.manager.window.geometry(&#39;+%d+%d&#39; % (x0, y0)) # in previous version of matplotlib</span>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="n">x0</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">y0</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">get_current_fig_manager</span><span class="p">()</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
    <span class="c1">#plt.get_current_fig_manager().window.geometry(&#39;+%d+%d&#39; % (x0, y0))</span>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="add_axes"><a class="viewcode-back" href="../index.html#Graphics.add_axes">[docs]</a><span class="k">def</span> <span class="nf">add_axes</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axwin</span><span class="o">=</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.87</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">))</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add axes to figure from input list of windows.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">axwin</span><span class="p">)</span></div>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="fig_img_axes"><a class="viewcode-back" href="../index.html#Graphics.fig_img_axes">[docs]</a><span class="k">def</span> <span class="nf">fig_img_axes</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">win_axim</span><span class="o">=</span><span class="p">(</span><span class="mf">0.08</span><span class="p">,</span>  <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">))</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Returns figure and image axes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span> <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">fig</span>
    <span class="n">axim</span> <span class="o">=</span> <span class="n">_fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">win_axim</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_fig</span><span class="p">,</span> <span class="n">axim</span></div>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="fig_img_cbar_axes"><a class="viewcode-back" href="../index.html#Graphics.fig_img_cbar_axes">[docs]</a><span class="k">def</span> <span class="nf">fig_img_cbar_axes</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
             <span class="n">win_axim</span><span class="o">=</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span>  <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.87</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">),</span>\
             <span class="n">win_axcb</span><span class="o">=</span><span class="p">(</span><span class="mf">0.923</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">))</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Returns figure and axes for image and color bar</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span> <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">fig</span>
    <span class="n">axim</span> <span class="o">=</span> <span class="n">_fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">win_axim</span><span class="p">)</span>
    <span class="n">axcb</span> <span class="o">=</span> <span class="n">_fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">win_axcb</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_fig</span><span class="p">,</span> <span class="n">axim</span><span class="p">,</span> <span class="n">axcb</span></div>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">set_win_title</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">titwin</span><span class="o">=</span><span class="s1">&#39;Image&#39;</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">set_window_title</span><span class="p">(</span><span class="n">titwin</span><span class="p">)</span>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">add_title_labels_to_axes</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fslab</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fstit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">if</span> <span class="n">title</span>  <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">axes</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fstit</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">axes</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fslab</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ylabel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">axes</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fslab</span><span class="p">)</span>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">hold</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">ioff</span><span class="p">()</span> <span class="c1"># hold contraol at show() (connect to keyboard for controllable re-drawing)</span>
    <span class="k">else</span>            <span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">ion</span><span class="p">()</span>  <span class="c1"># do not hold control</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">pause</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span> <span class="c1"># hack to make it work... othervise show() does not work...</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">draw_fig</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">save_plt</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;img.png&#39;</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">if</span> <span class="n">verb</span> <span class="p">:</span> <span class="nb">print</span> <span class="s1">&#39;Save plot in file: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">fname</span> 
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">save_fig</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">fname</span><span class="o">=</span><span class="s1">&#39;img.png&#39;</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">if</span> <span class="n">verb</span> <span class="p">:</span> <span class="nb">print</span> <span class="s1">&#39;Save figure in file: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">fname</span> 
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="hist"><a class="viewcode-back" href="../index.html#Graphics.hist">[docs]</a><span class="k">def</span> <span class="nf">hist</span><span class="p">(</span><span class="n">axhi</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amp_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Makes historgam from input array of values (arr), which are sorted in number of bins (bins) in the range (amp_range=(amin,amax))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#axhi.cla()</span>
    <span class="n">hi</span> <span class="o">=</span> <span class="n">axhi</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="n">amp_range</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="n">log</span><span class="p">)</span> <span class="c1">#, log=logYIsOn)</span>
    <span class="k">if</span> <span class="n">amp_range</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">axhi</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">amp_range</span><span class="p">)</span> <span class="c1"># axhi.set_autoscale_on(False) # suppress autoscailing</span>
    <span class="n">wei</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">hi</span>
    <span class="n">add_stat_text</span><span class="p">(</span><span class="n">axhi</span><span class="p">,</span> <span class="n">wei</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hi</span></div>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="imshow"><a class="viewcode-back" href="../index.html#Graphics.imshow">[docs]</a><span class="k">def</span> <span class="nf">imshow</span><span class="p">(</span><span class="n">axim</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">amp_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
           <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">,</span>\
           <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;inferno&#39;</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    extent - list of four image physical limits for labeling,</span>
<span class="sd">    cmap: &#39;jet&#39;, &#39;gray_r&#39;, &#39;inferno&#39;</span>
<span class="sd">    #axim.cla()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">imsh</span> <span class="o">=</span> <span class="n">axim</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">interpolation</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">amp_range</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">imsh</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">amp_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">amp_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">imsh</span></div>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="colorbar"><a class="viewcode-back" href="../index.html#Graphics.colorbar">[docs]</a><span class="k">def</span> <span class="nf">colorbar</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">imsh</span><span class="p">,</span> <span class="n">axcb</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">amp_range</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    orientation = &#39;horizontal&#39;</span>
<span class="sd">    amp_range = (-10,50)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">amp_range</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">imsh</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">amp_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">amp_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">cbar</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">imsh</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">axcb</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cbar</span></div>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="imshow_cbar"><a class="viewcode-back" href="../index.html#Graphics.imshow_cbar">[docs]</a><span class="k">def</span> <span class="nf">imshow_cbar</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axim</span><span class="p">,</span> <span class="n">axcb</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">amin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">,</span>\
                <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;inferno&#39;</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    extent - list of four image physical limits for labeling,</span>
<span class="sd">    cmap: &#39;gray_r&#39;</span>
<span class="sd">    #axim.cla()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">axim</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">img</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">:</span> <span class="k">return</span>
    <span class="n">imsh</span> <span class="o">=</span> <span class="n">axim</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">interpolation</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
    <span class="n">ave</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="k">if</span> <span class="n">amin</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">amax</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">rms</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>  <span class="k">if</span> <span class="n">amin</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">amax</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">cmin</span> <span class="o">=</span> <span class="n">amin</span> <span class="k">if</span> <span class="n">amin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ave</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">rms</span> <span class="k">if</span> <span class="n">ave</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">cmax</span> <span class="o">=</span> <span class="n">amax</span> <span class="k">if</span> <span class="n">amax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ave</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">rms</span> <span class="k">if</span> <span class="n">ave</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">cmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">imsh</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">cmin</span><span class="p">,</span> <span class="n">cmax</span><span class="p">)</span>
    <span class="n">cbar</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">imsh</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">axcb</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">imsh</span><span class="p">,</span> <span class="n">cbar</span></div>

<span class="c1">#------------------------------</span>
<span class="c1">#------------------------------</span>
<span class="c1">#------------------------------</span>
<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="test01"><a class="viewcode-back" href="../index.html#Graphics.test01">[docs]</a><span class="k">def</span> <span class="nf">test01</span><span class="p">()</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; imshow</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">random_standard</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="mi">60</span><span class="p">),</span> <span class="n">mu</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
    <span class="c1">#fig = figure(figsize=(6,5), title=&#39;Test imshow&#39;, dpi=80, facecolor=&#39;w&#39;, edgecolor=&#39;w&#39;, frameon=True, move=(100,10))    </span>
    <span class="c1">#axim = add_axes(fig, axwin=(0.10, 0.08, 0.85, 0.88))</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axim</span> <span class="o">=</span> <span class="n">fig_img_axes</span><span class="p">()</span>
    <span class="n">move_fig</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">imsh</span> <span class="o">=</span> <span class="n">imshow</span><span class="p">(</span><span class="n">axim</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">amp_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
           <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">,</span>\
           <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;jet&#39;</span><span class="p">)</span> </div>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="test02"><a class="viewcode-back" href="../index.html#Graphics.test02">[docs]</a><span class="k">def</span> <span class="nf">test02</span><span class="p">()</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; hist</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">25</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">random_standard</span><span class="p">((</span><span class="mi">500</span><span class="p">,),</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>
    <span class="c1">#fig = figure(figsize=(6,5), title=&#39;Test hist&#39;, dpi=80, facecolor=&#39;w&#39;, edgecolor=&#39;w&#39;, frameon=True, move=(100,10))    </span>
    <span class="c1">#axhi = add_axes(fig, axwin=(0.10, 0.08, 0.85, 0.88))</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axhi</span> <span class="o">=</span> <span class="n">fig_img_axes</span><span class="p">()</span>
    <span class="n">his</span> <span class="o">=</span> <span class="n">hist</span><span class="p">(</span><span class="n">axhi</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">amp_range</span><span class="o">=</span><span class="p">(</span><span class="n">mu</span><span class="o">-</span><span class="mi">6</span><span class="o">*</span><span class="n">sigma</span><span class="p">,</span><span class="n">mu</span><span class="o">+</span><span class="mi">6</span><span class="o">*</span><span class="n">sigma</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="test03"><a class="viewcode-back" href="../index.html#Graphics.test03">[docs]</a><span class="k">def</span> <span class="nf">test03</span><span class="p">()</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Update image in the event loop</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#fig = figure(figsize=(6,5), title=&#39;Test hist&#39;, dpi=80, facecolor=&#39;w&#39;, edgecolor=&#39;w&#39;, frameon=True, move=(100,10))</span>
    <span class="c1">#axim = add_axes(fig, axwin=(0.10, 0.08, 0.85, 0.88))</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axim</span> <span class="o">=</span> <span class="n">fig_img_axes</span><span class="p">()</span>
    <span class="n">imsh</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">:</span>
       <span class="nb">print</span> <span class="s1">&#39;Event </span><span class="si">%3d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span>
       <span class="n">img</span> <span class="o">=</span> <span class="n">random_standard</span><span class="p">((</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">mu</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
       <span class="c1">#axim.cla()</span>
       <span class="n">set_win_title</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s1">&#39;Event </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>

       <span class="k">if</span> <span class="n">imsh</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">:</span>
           <span class="n">imsh</span> <span class="o">=</span> <span class="n">imshow</span><span class="p">(</span><span class="n">axim</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">amp_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                  <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">,</span>\
                  <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;jet&#39;</span><span class="p">)</span> 
       <span class="k">else</span> <span class="p">:</span>
           <span class="n">imsh</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
       <span class="n">show</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># !!!!!!!!!!       </span></div>
       <span class="c1">#draw_fig(fig) # !!!!!!!!!!</span>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="test04"><a class="viewcode-back" href="../index.html#Graphics.test04">[docs]</a><span class="k">def</span> <span class="nf">test04</span><span class="p">()</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Update histogram in the event loop</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">25</span>
    <span class="c1">#fig = figure(figsize=(6,5), title=&#39;Test hist&#39;, dpi=80, facecolor=&#39;w&#39;, edgecolor=&#39;w&#39;, frameon=True, move=(100,10))</span>
    <span class="c1">#axhi = add_axes(fig, axwin=(0.10, 0.08, 0.85, 0.88))</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axhi</span> <span class="o">=</span> <span class="n">fig_img_axes</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">:</span>
       <span class="nb">print</span> <span class="s1">&#39;Event </span><span class="si">%3d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span>
       <span class="n">arr</span> <span class="o">=</span> <span class="n">random_standard</span><span class="p">((</span><span class="mi">500</span><span class="p">,),</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
       <span class="n">axhi</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
       <span class="n">set_win_title</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s1">&#39;Event </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
       <span class="n">his</span> <span class="o">=</span> <span class="n">hist</span><span class="p">(</span><span class="n">axhi</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">amp_range</span><span class="o">=</span><span class="p">(</span><span class="n">mu</span><span class="o">-</span><span class="mi">6</span><span class="o">*</span><span class="n">sigma</span><span class="p">,</span><span class="n">mu</span><span class="o">+</span><span class="mi">6</span><span class="o">*</span><span class="n">sigma</span><span class="p">),</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

       <span class="n">show</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># !!!!!!!!!!</span></div>
       <span class="c1">#draw(fig)    # !!!!!!!!!!</span>

<span class="c1">#------------------------------</span>

<div class="viewcode-block" id="test05"><a class="viewcode-back" href="../index.html#Graphics.test05">[docs]</a><span class="k">def</span> <span class="nf">test05</span><span class="p">()</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Update image with color bar in the event loop</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axim</span><span class="p">,</span> <span class="n">axcb</span> <span class="o">=</span> <span class="n">fig_img_cbar_axes</span><span class="p">()</span>
    <span class="n">move_fig</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">imsh</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="p">:</span>
       <span class="nb">print</span> <span class="s1">&#39;Event </span><span class="si">%3d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span>
       <span class="n">img</span> <span class="o">=</span> <span class="n">random_standard</span><span class="p">((</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">mu</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
       <span class="c1">#axim.cla()</span>
       <span class="n">set_win_title</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s1">&#39;Event </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
       <span class="k">if</span> <span class="n">imsh</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">:</span>
           <span class="n">imsh</span><span class="p">,</span> <span class="n">cbar</span> <span class="o">=</span> <span class="n">imshow_cbar</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axim</span><span class="p">,</span> <span class="n">axcb</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">amin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">amax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>\
                                    <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">,</span>\
                                    <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;inferno&#39;</span><span class="p">)</span>
       <span class="k">else</span> <span class="p">:</span>
           <span class="n">imsh</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
           <span class="n">ave</span><span class="p">,</span> <span class="n">rms</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">img</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
           <span class="n">imsh</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">ave</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">rms</span><span class="p">,</span> <span class="n">ave</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">rms</span><span class="p">)</span>
       <span class="n">show</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># !!!!!!!!!!       </span></div>
       <span class="c1">#draw_fig(fig) # !!!!!!!!!!</span>

<span class="c1">#------------------------------</span>
<span class="c1">#------------------------------</span>
<span class="c1">#------------------------------</span>
<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">test_selected</span><span class="p">()</span> <span class="p">:</span>

    <span class="kn">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">time</span>
    <span class="kn">import</span> <span class="nn">sys</span><span class="p">;</span> <span class="k">global</span> <span class="n">sys</span>
    <span class="kn">from</span> <span class="nn">pyimgalgos.NDArrGenerators</span> <span class="k">import</span> <span class="n">random_standard</span><span class="p">;</span> <span class="k">global</span> <span class="n">random_standard</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span>   <span class="p">:</span>
        <span class="nb">print</span> <span class="s1">&#39;Use command &gt; python </span><span class="si">%s</span><span class="s1"> &lt;test-number [1-5]&gt;&#39;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span> <span class="p">(</span><span class="s1">&#39;Add &lt;test-number&gt; in command line...&#39;</span><span class="p">)</span>

    <span class="n">tname</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;1&#39;</span>
    <span class="nb">print</span> <span class="mi">50</span><span class="o">*</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Test </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">tname</span>

    <span class="n">t0_sec</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
    <span class="k">if</span>   <span class="n">tname</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="n">test01</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">tname</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span> <span class="n">test02</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">tname</span> <span class="o">==</span> <span class="s1">&#39;3&#39;</span><span class="p">:</span> <span class="n">test03</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">tname</span> <span class="o">==</span> <span class="s1">&#39;4&#39;</span><span class="p">:</span> <span class="n">test04</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">tname</span> <span class="o">==</span> <span class="s1">&#39;5&#39;</span><span class="p">:</span> <span class="n">test05</span><span class="p">()</span>
    <span class="k">else</span> <span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s1">&#39;Test </span><span class="si">%s</span><span class="s1"> is not implemented&#39;</span> <span class="o">%</span> <span class="n">tname</span><span class="p">)</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Test </span><span class="si">%s</span><span class="s1"> consumed time </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tname</span><span class="p">,</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t0_sec</span><span class="p">)</span>
    <span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="c1">#------------------------------</span>

<span class="k">def</span> <span class="nf">test_all</span><span class="p">()</span> <span class="p">:</span>
    <span class="n">test01</span><span class="p">()</span>
    <span class="n">test02</span><span class="p">()</span>
    <span class="n">show</span><span class="p">()</span>

<span class="c1">#------------------------------</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span> <span class="p">:</span>
    <span class="n">test_selected</span><span class="p">()</span>
    <span class="c1">#test_all()</span>
    <span class="nb">print</span> <span class="s1">&#39;End of test&#39;</span>

<span class="c1">#------------------------------</span>

</pre></div>

          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          
          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="../py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="../genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Mikhail Dubrovin.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>